# Gateway
DB_DROP_AND_RECREATE=1  # Dev mode: drops all tables and recreates from scratch on startup
DB_CREATE_TABLES=0
SQLALCHEMY_ECHO=1  # Show SQL queries in logs
DB_SEED=1  # Seed database with test data after creating tables

AUDIO_CACHE_TYPE=sqlite
AUDIO_CACHE_CONFIG__PATH=audio_cache
AUDIO_CACHE_CONFIG__MAX_SIZE_MB=1024
METRICS_DATABASE_URL=postgresql://metrics:metrics@metrics-db:5432/metrics
LOG_DIR=gateway/logs

DOCUMENT_CACHE_TYPE=sqlite
DOCUMENT_CACHE_CONFIG__PATH=document_cache
DOCUMENT_CACHE_CONFIG__MAX_SIZE_MB=1024
DOCUMENT_MAX_DOWNLOAD_SIZE=104857600 # 100 MB

EXTRACTION_CACHE_TYPE=sqlite
EXTRACTION_CACHE_CONFIG__PATH=extraction_cache
EXTRACTION_CACHE_CONFIG__MAX_SIZE_MB=1024

IMAGE_STORAGE_TYPE=local
IMAGES_DIR=/data/images

MAX_BLOCK_CHARS=250
SOFT_LIMIT_MULT=1.3
MIN_CHUNK_SIZE=40

DATABASE_URL=postgresql+asyncpg://yapit:yapit@postgres:5432/yapit
REDIS_URL=redis://redis:6379/0
CORS_ORIGINS='["http://localhost:5173"]'

# Worker / Processor
TTS_BUFFER_BEHIND=8   # Blocks to keep behind cursor for skip-back
TTS_BUFFER_AHEAD=16   # Prefetch window ahead of cursor
AI_PROCESSOR=gemini
KOKORO_CPU_REPLICAS=1
YOLO_CPU_REPLICAS=2
OMP_NUM_THREADS=4

MARKXIV_URL=http://markxiv:8080

# Postgres
POSTGRES_USER=yapit
POSTGRES_PASSWORD=yapit
POSTGRES_DB=yapit

STACK_AUTH_API_HOST=http://stack-auth:8102
STACK_AUTH_APP_HOST=http://stack-auth:5173
STACK_AUTH_PROJECT_ID=a12651bb-7824-459d-b424-21a0950ab902
STACK_AUTH_SERVER_KEY=ssk_0fqsegjvkkas2yr4eb78z58wr3v5r3z7hv11qtv4n2qsr
STACK_AUTH_CLIENT_KEY=pck_8ny111ccr9yyhty8vrmjk5ab32ezvcf19crck312j42p0

# stack-auth
NEXT_PUBLIC_STACK_API_URL=http://localhost:8102
NEXT_PUBLIC_STACK_DASHBOARD_URL=http://localhost:8101
STACK_DATABASE_CONNECTION_STRING=postgres://yapit:yapit@postgres:5432/yapit
STACK_DIRECT_DATABASE_CONNECTION_STRING=postgres://yapit:yapit@postgres:5432/yapit
STACK_SERVER_SECRET=ssk_0fqsegjvkkas2yr4eb78z58wr3v5r3z7hv11qtv4n2qsr
STACK_SEED_INTERNAL_PROJECT_ALLOW_LOCALHOST=true
STACK_SEED_INTERNAL_PROJECT_SIGN_UP_ENABLED=true
STACK_RUN_MIGRATIONS=true
STACK_SKIP_SEED_SCRIPT=false

# For scripts/tests running on host machine that need to reach Stack Auth in Docker
DEV_STACK_AUTH_API_HOST=http://localhost:8102

# svix
# SVIX_JWT_SECRET=8KjzRXrKkd9YFcNyqLSIY8JwiaCeRc6WK4UkMnSW
# SVIX_DB_DSN=postgres://yapit:yapit@postgres:5432/svix
# SVIX_REDIS_DSN=redis://redis:6379/1
# SVIX_QUEUE_TYPE=redis

# RunPod
RUNPOD_REQUEST_TIMEOUT_SECONDS=180

# Stripe / Billing
BILLING_ENABLED=true
# Test price IDs (from stripe_setup.py --test) - Fresh sandbox 2026-01-21
STRIPE_PRICE_BASIC_MONTHLY=price_1Ss9cNEwIDkVLGu5UeFAuiZm
STRIPE_PRICE_BASIC_YEARLY=price_1Ss9cOEwIDkVLGu55ezwmHAB
STRIPE_PRICE_PLUS_MONTHLY=price_1Ss9cPEwIDkVLGu5EzQtHI0f
STRIPE_PRICE_PLUS_YEARLY=price_1Ss9cPEwIDkVLGu5uOLRWHsX
STRIPE_PRICE_MAX_MONTHLY=price_1Ss9cQEwIDkVLGu5katOQB2e
STRIPE_PRICE_MAX_YEARLY=price_1Ss9cREwIDkVLGu5J5bKCIrw

