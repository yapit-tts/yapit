# Gateway
DB_DROP_AND_RECREATE=1  # Dev mode: drops all tables and recreates from scratch on startup
SQLALCHEMY_ECHO=1  # Show SQL queries in logs
DB_SEED=1  # Seed database with test data after creating tables

AUDIO_CACHE_TYPE=sqlite
AUDIO_CACHE_CONFIG__PATH=audio_cache
METRICS_DATABASE_URL=postgresql://metrics:metrics@metrics-db:5432/metrics
LOG_DIR=gateway/logs

DOCUMENT_CACHE_TYPE=sqlite
DOCUMENT_CACHE_CONFIG__PATH=document_cache
DOCUMENT_CACHE_TTL_WEBPAGE=1800  # 30 minutes
DOCUMENT_CACHE_TTL_DOCUMENT=604800  # 7 days
DOCUMENT_MAX_DOWNLOAD_SIZE=104857600 # 100 MB

EXTRACTION_CACHE_TYPE=sqlite
EXTRACTION_CACHE_CONFIG__PATH=extraction_cache
EXTRACTION_CACHE_CONFIG__MAX_SIZE_MB=1024

IMAGES_DIR=/data/images
MAX_BLOCK_CHARS=150

DATABASE_URL=postgresql+asyncpg://yapit:yapit@postgres:5432/yapit
REDIS_URL=redis://redis:6379/0
CORS_ORIGINS='["http://localhost:5173"]'

# Worker / Processor
TTS_PROCESSORS_FILE=tts_processors.dev.json
TTS_OVERFLOW_QUEUE_THRESHOLD=8
TTS_BUFFER_BEHIND=8   # Blocks to keep behind cursor for skip-back
TTS_BUFFER_AHEAD=16   # Prefetch window ahead of cursor
DOCUMENT_PROCESSORS_FILE=document_processors.dev.json
KOKORO_CPU_REPLICAS=2
OMP_NUM_THREADS=4

# Postgres
POSTGRES_USER=yapit
POSTGRES_PASSWORD=yapit
POSTGRES_DB=yapit

STACK_AUTH_API_HOST=http://stack-auth:8102
STACK_AUTH_APP_HOST=http://stack-auth:5173
STACK_AUTH_PROJECT_ID=a12651bb-7824-459d-b424-21a0950ab902
STACK_AUTH_SERVER_KEY=ssk_0fqsegjvkkas2yr4eb78z58wr3v5r3z7hv11qtv4n2qsr
STACK_AUTH_CLIENT_KEY=pck_8ny111ccr9yyhty8vrmjk5ab32ezvcf19crck312j42p0

# stack-auth
NEXT_PUBLIC_STACK_API_URL=http://localhost:8102
NEXT_PUBLIC_STACK_DASHBOARD_URL=http://localhost:8101
STACK_DATABASE_CONNECTION_STRING=postgres://yapit:yapit@postgres:5432/yapit
STACK_DIRECT_DATABASE_CONNECTION_STRING=postgres://yapit:yapit@postgres:5432/yapit
STACK_SERVER_SECRET=ssk_0fqsegjvkkas2yr4eb78z58wr3v5r3z7hv11qtv4n2qsr
STACK_SEED_INTERNAL_PROJECT_ALLOW_LOCALHOST=true
STACK_SEED_INTERNAL_PROJECT_SIGN_UP_ENABLED=true
STACK_RUN_MIGRATIONS=true
STACK_SKIP_SEED_SCRIPT=false

# For scripts/tests running on host machine that need to reach Stack Auth in Docker
DEV_STACK_AUTH_API_HOST=http://localhost:8102

# svix
# SVIX_JWT_SECRET=8KjzRXrKkd9YFcNyqLSIY8JwiaCeRc6WK4UkMnSW
# SVIX_DB_DSN=postgres://yapit:yapit@postgres:5432/svix
# SVIX_REDIS_DSN=redis://redis:6379/1
# SVIX_QUEUE_TYPE=redis

# RunPod
# RUNPOD_API_KEY=
RUNPOD_REQUEST_TIMEOUT_SECONDS=180 # initial requests take a lot of time with vllm without active workers # TODO tune
CLIENT_REQUEST_TIMEOUT_SECONDS=60
SYNTHESIS_POLLING_TIMEOUT_SECONDS=210 # Gateway long-polling timeout (should be > RUNPOD_REQUEST_TIMEOUT_SECONDS)

# Stripe / Billing
BILLING_ENABLED=true
# Test price IDs (from stripe_setup.py --test) - Fresh sandbox 2026-01-05
STRIPE_PRICE_BASIC_MONTHLY=price_1Sm7VuIoESGnGrFXeDlmko2T
STRIPE_PRICE_BASIC_YEARLY=price_1Sm7VuIoESGnGrFXvTv2JBP9
STRIPE_PRICE_PLUS_MONTHLY=price_1Sm7VvIoESGnGrFXZE1xWXY1
STRIPE_PRICE_PLUS_YEARLY=price_1Sm7VwIoESGnGrFXy851D7Ft
STRIPE_PRICE_MAX_MONTHLY=price_1Sm7VxIoESGnGrFXBS8mbAqa
STRIPE_PRICE_MAX_YEARLY=price_1Sm7VxIoESGnGrFXaCT78Wgk
# Old sandbox (commented for reference)
# STRIPE_PRICE_BASIC_MONTHLY=price_1SkHX6IRF9ptKmcP7odpitIS
# STRIPE_PRICE_BASIC_YEARLY=price_1SkHX6IRF9ptKmcPjSYK5KtC
# STRIPE_PRICE_PLUS_MONTHLY=price_1SkHX7IRF9ptKmcPFxbC0ujk
# STRIPE_PRICE_PLUS_YEARLY=price_1SkHX7IRF9ptKmcPbt3JjxGN
# STRIPE_PRICE_MAX_MONTHLY=price_1SkHX8IRF9ptKmcPCPZe3dL8
# STRIPE_PRICE_MAX_YEARLY=price_1SkHX8IRF9ptKmcPWcTZxJJp

