services:
  runpod-bridge:
    init: true
    build:
      context: .
      dockerfile: yapit/gateway/Dockerfile  # Uses same image as gateway
    command: python -m yapit.workers.runpod_bridge
    env_file: ./.env.prod
    environment:
      RUNPOD_API_KEY: ${RUNPOD_API_KEY}
      # Map model names to RunPod endpoint IDs
      # Example: RUNPOD_ENDPOINT_KOKORO=your-endpoint-id
    depends_on:
      - redis
    restart: unless-stopped